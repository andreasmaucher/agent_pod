(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8974],{66982:(e,t,a)=>{Promise.resolve().then(a.bind(a,55927))},23754:(e,t,a)=>{"use strict";a.d(t,{W:()=>r});var s=a(95155),n=a(5565),l=a(2818);let r=()=>(0,s.jsx)("div",{className:"p-0 lg:px-12",children:(0,s.jsx)("div",{className:"sticky top-8",children:(0,s.jsx)("div",{className:"space-y-1",children:(0,s.jsx)("div",{className:"bg-[#F2F2F2] p-6",children:(0,s.jsx)("div",{className:"space-y-1",children:(0,s.jsxs)("div",{className:"flex flex-col space-y-1",children:[(0,s.jsx)("a",{href:"/faq",className:"text-blue-600 hover:text-blue-800 text-[16px] font-[500] font-inter",children:"FAQ"}),(0,s.jsx)("a",{href:"/lore",className:"text-blue-600 hover:text-blue-800 text-[16px] font-[500] font-inter",children:"Lore"}),(0,s.jsx)("a",{href:"/terms",className:"text-blue-600 hover:text-blue-800 text-[16px] font-[500] font-inter",children:"Terms"}),(0,s.jsx)("div",{className:"flex items-center gap-2 pt-2",children:[{link:l.env.NEXT_PUBLIC_X_LINK,icon:"/x.svg",alt:"X"},{link:l.env.NEXT_PUBLIC_GITHUB_LINK,icon:"/github.svg",alt:"Github"}].map(e=>(0,s.jsx)("a",{href:e.link,target:"_blank",children:(0,s.jsx)(n.default,{src:e.icon,alt:e.alt,width:16,height:16})},e.link))})]})})})})})})},79296:(e,t,a)=>{"use strict";a.d(t,{U:()=>r});var s=a(95155),n=a(29602),l=a(12115);let r=e=>{let{totalParticipants:t,totalMessages:a,className:r,endgameTime:i,isGameEnded:c}=e,[d,o]=(0,l.useState)(0);(0,l.useEffect)(()=>{if(!i)return;let e=new Date;o(Math.floor((i.getTime()-e.getTime())/1e3));let t=setInterval(()=>{o(e=>e<=0?(clearInterval(t),0):e-1)},1e3);return()=>clearInterval(t)},[i]);let x=Math.floor(d/60),u=d<=0?"Game Ended":"".concat(x,":").concat((d%60).toString().padStart(2,"0"));return(0,s.jsx)("div",{className:(0,n.cn)("px-0 lg:px-12",r),children:(0,s.jsx)("div",{className:"sticky top-8",children:(0,s.jsx)("div",{className:"space-y-6",children:(0,s.jsx)("div",{className:"bg-[#F2F2F2] p-6",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h3",{className:"font-[700] text-[20px] text-[#86868b] font-inter",children:"Stats"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-md font-[600] text-[#86868b] uppercase tracking-wider font-inter",children:"Total Participants"}),(0,s.jsx)("p",{className:"text-5xl font-[500] text-[#1F2024] font-inter",children:t})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-md font-[600] text-[#86868b] uppercase tracking-wider font-inter",children:"Break Attempts"}),(0,s.jsx)("p",{className:"text-5xl font-[500] text-[#1F2024] font-inter",children:a})]}),c&&(0,s.jsx)("div",{children:(0,s.jsx)("p",{className:"text-5xl font-[500] text-[#1F2024] font-inter",children:"Game Ended"})}),!c&&i&&(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-md font-[600] text-[#86868b] uppercase tracking-wider font-inter",children:"Time Remaining"}),(0,s.jsx)("p",{className:"text-5xl font-[500] text-[#1F2024] font-inter",children:u})]})]})})})})})}},55927:(e,t,a)=>{"use strict";a.d(t,{Main:()=>ea});var s=a(95155),n=a(51235),l=a(25683),r=a(12115),i=a(34420),c=a(30405),d=a(68140),o=a(29602);function x(e){let{prizeFund:t,direction:a="up",delay:l=0,className:x,decimalPlaces:u=0,symbol:m="$"}=e,f=null!=t?t:0,b=void 0===t,h=(0,r.useRef)(null),p=(0,i.d)("down"===a?f:0),y=(0,c.z)(p,{damping:60,stiffness:100}),g=(0,d.W)(h,{once:!0,margin:"0px"});return(0,r.useEffect)(()=>{g&&setTimeout(()=>{p.set("down"===a?0:f)},1e3*l)},[p,g,l,f,a]),(0,r.useEffect)(()=>y.on("change",e=>{h.current&&(h.current.textContent=m+Intl.NumberFormat("en-US",{minimumFractionDigits:u,maximumFractionDigits:u}).format(Number(e.toFixed(u))))}),[y,u,m]),(0,s.jsxs)(n.P.span,{className:(0,o.cn)("inline-block tabular-nums tracking-wider",x),ref:h,animate:b?{opacity:[1,.5,1]}:{opacity:1},transition:b?{duration:1,repeat:1/0}:{},children:[m,Intl.NumberFormat("en-US",{minimumFractionDigits:u,maximumFractionDigits:u}).format("down"===a?f:0)]})}function u(e){let{text:t,duration:a=200,className:n}=e,[l,i]=(0,r.useState)(""),[c,d]=(0,r.useState)(0);return(0,r.useEffect)(()=>{let e=setInterval(()=>{c<t.length?(i(t.substring(0,c+1)),d(c+1)):clearInterval(e)},a);return()=>{clearInterval(e)}},[a,c]),(0,s.jsx)("h1",{className:(0,o.cn)("font-display text-center text-4xl font-bold leading-[5rem] tracking-[-0.02em] drop-shadow-sm",n),children:l||t})}function m(e){let{className:t}=e;return(0,s.jsx)("div",{className:(0,o.cn)("max-w-[600px]",t),children:(0,s.jsx)(u,{className:"text-xs sm:text-sm text-center sm:text-left font-[family-name:var(--font-geist-mono)]",text:"Welcome to Convice Me. Under no circumstances will the podcast hosts change their opinion. But you can try to convince them otherwise...and win the pool prize!",duration:15})})}function f(e){let{className:t,prizeFund:a}=e;return(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-md font-[600] text-[#86868b] uppercase tracking-wider font-inter",children:"BASE POOL PRIZE"}),(0,s.jsx)("p",{className:"whitespace-pre-wrap text-2xl sm:text-5xl font-[500] text-[#1F2024] font-inter tracking-tighter ".concat(t||""),children:(0,s.jsx)(x,{prizeFund:a,decimalPlaces:2,symbol:"$"})})]})}let b=e=>{let{children:t}=e;return(0,s.jsx)(n.P.div,{initial:{opacity:0,scale:.8,y:50,backgroundColor:"rgb(220 252 231)"},animate:{opacity:1,scale:1,y:0,backgroundColor:["rgb(220 252 231)","transparent"]},transition:{duration:.6,ease:[.23,1,.32,1],opacity:{duration:.4},scale:{duration:.4},y:{duration:.4},backgroundColor:{duration:1.5,times:[0,1]}},children:t})},h=async(e,t)=>[];var p=a(32355);let y=()=>{let{account:e,isConnected:t,connectWallet:a,disconnectWallet:n}=function(){let[e,t]=(0,r.useState)(""),[a,s]=(0,r.useState)(!1),[n,l]=(0,r.useState)("");return{account:e,isConnected:a,error:n,connectWallet:async()=>{try{let e=await (0,p.N)();if(!e){l("Please install a Starknet wallet");return}await e.enable(),t(e.selectedAddress||""),s(!0),l("")}catch(e){l(e.message)}},disconnectWallet:()=>{t(""),s(!1)}}}();return(0,s.jsx)("button",{onClick:t?n:a,className:"bg-stone-800 hover:bg-stone-900 text-white px-4 py-2 rounded-full text-sm transition-colors",children:t?"".concat(e.slice(0,6),"...").concat(e.slice(-4)):"Connect Wallet"})};var g=a(40767),v=a(86710),j=a(79296),w=a(23754);let N=e=>{let{gameState:t,prizeFund:a,isOpen:n,onClose:l}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"fixed z-50 inset-0 bg-black/50 transition-opacity duration-300 lg:hidden ".concat(n?"opacity-100":"opacity-0 pointer-events-none"),onClick:l}),(0,s.jsx)("div",{className:"fixed z-50 left-0 top-0 h-full w-80 bg-white transform transition-transform duration-300 ease-in-out ".concat(n?"translate-x-0":"-translate-x-full"),children:(0,s.jsx)("div",{className:"p-6",children:(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsx)("div",{className:"flex flex-col gap-6",children:(0,s.jsx)(g.A,{className:"w-6 h-6 cursor-pointer ml-auto",onClick:l})}),(0,s.jsx)(w.W,{}),(0,s.jsx)(j.U,{totalParticipants:t.uniqueWallets,totalMessages:t.messagesCount,prizeFund:null!=a?a:0,endgameTime:t.endgameTime,isGameEnded:t.isGameEnded})]})})})]})},k=e=>{let{gameState:t,prizeFund:a}=e,[n,l]=(0,r.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center p-4",children:[(0,s.jsx)("div",{className:"flex items-center gap-4 mr-auto cursor-pointer lg:hidden",onClick:()=>l(!0),children:(0,s.jsx)(v.A,{})}),(0,s.jsx)("div",{className:"flex items-center gap-4 ml-auto",children:(0,s.jsx)(y,{})})]}),(0,s.jsx)(N,{gameState:t,prizeFund:a,isOpen:n,onClose:()=>l(!1)})]})};var S=a(14505),F=a(26164);let E=async e=>({success:!0,error:null}),C=async(e,t,a,s)=>{};var T=a(35965),P=a(5592),I=a(36487),_=a(62044),M=a(42640),A=a(31136),W=a.n(A),D=a(1083),U=a(5565);let z=e=>e?"".concat(e.slice(0,6),"...").concat(e.slice(-4)):"",O=e=>{let{message:t,onSelect:a,showTime:n=!0}=e,l="user"===t.role,r="system"===t.role;return(0,s.jsx)("div",{className:"flex ".concat(l?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"flex ".concat(l?"flex-row-reverse":"flex-row"),children:[(0,s.jsx)("div",{className:"hidden lg:block flex-shrink-0",children:(0,s.jsx)("div",{className:"w-8 h-8 rounded-full shadow-sm flex items-center justify-center transition-colors overflow-hidden ".concat(l?"ml-3":"mr-3"),children:l?(0,s.jsx)(W(),{size:32,name:t.userWallet,variant:"pixel"}):r?(0,s.jsx)("div",{className:"bg-violet-500/90 w-full h-full flex items-center justify-center",children:(0,s.jsx)(M.A,{className:"w-4 h-4 text-white"})}):(0,s.jsx)("div",{className:"bg-gray-600/90 w-full h-full flex items-center justify-center",children:(0,s.jsx)(U.default,{src:"/freysa.png",alt:"Freysa",height:32,width:32})})})}),(0,s.jsxs)("div",{className:"flex flex-col ".concat(l?"items-end":"items-start"),children:[l&&t.userWallet&&(0,s.jsxs)("div",{className:"hidden lg:flex items-center gap-1 mb-1 mr-1",children:[(0,s.jsx)("span",{className:"text-xs text-gray-500",children:z(t.userWallet)}),t.isWinner&&(0,s.jsx)("span",{className:"text-xs text-amber-500 font-medium",children:"\uD83C\uDFC6 Winner!"})]}),(0,s.jsx)("div",{onClick:()=>{l&&a&&"id"in t&&a(t)},role:l?"button":void 0,tabIndex:l?0:void 0,className:"rounded-xl px-4 py-2.5 shadow-sm backdrop-blur-sm max-w-xl ".concat(l&&a?"cursor-pointer":""," transition-all ").concat(r?"bg-violet-100 text-violet-900":l?t.isWinner?"bg-gradient-to-br from-yellow-400 via-amber-500 to-yellow-600 text-white shadow-lg shadow-amber-500/20":"bg-gray-200 text-gray-900":"bg-gray-800 text-white"),children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("p",{className:"text-[15px] leading-relaxed",children:t.content}),!l&&t.isWinner&&(0,s.jsx)("p",{className:"text-[13px] text-emerald-300 font-medium mt-1",children:"Freysa decided to send the money"})]})}),n&&"createdAt"in t&&(0,s.jsx)("div",{className:"flex items-center gap-2 mt-1",children:(0,s.jsx)("span",{className:"text-xs text-gray-500 opacity-70",children:(0,D.GP)(new Date(t.createdAt))})})]})]})})},B=async e=>({id:"1",content:"Example message",txHash:e,role:"user",userWallet:"0x...",createdAt:new Date().toISOString()}),G=e=>{let{txHash:t,onClose:a}=e,[l,i]=(0,r.useState)(),[c,d]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{(async()=>{try{let e=await B(t);i({...e,role:e.role})}catch(e){console.error("Failed to fetch message:",e)}finally{d(!1)}})()},[t]),(0,s.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center z-[100]",children:[(0,s.jsx)(n.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black/50",onClick:a}),(0,s.jsx)(n.P.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-2xl mx-4 z-[101]",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border-b",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"AI Context"}),(0,s.jsx)("button",{onClick:a,className:"p-2 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Close modal",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-gray-500",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{d:"M6 18L18 6M6 6l12 12"})})})]}),(0,s.jsx)("div",{className:"p-6",children:(0,s.jsx)("div",{className:"max-h-[60vh] overflow-y-auto",children:c?(0,s.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-900"})}):(null==l?void 0:l.fullConversation)?(0,s.jsx)("pre",{className:"bg-gray-50 p-4 rounded-lg overflow-x-auto",children:(0,s.jsx)("code",{className:"text-sm",children:JSON.stringify(JSON.parse(l.fullConversation),null,2)})}):(0,s.jsx)("div",{className:"text-center text-gray-500",children:"No conversation data available"})})})]})})]})};var R=a(47650),L=a(58388),H=a(8401),$=a(9321);let q=[{type:"constructor",inputs:[{name:"avaAddress",type:"address",internalType:"address"},{name:"prizePoolAddress",type:"address",internalType:"address"},{name:"poolFeePerc_",type:"uint256",internalType:"uint256"},{name:"teamAddress",type:"address",internalType:"address"},{name:"teamFeePerc_",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"},{type:"fallback",stateMutability:"payable"},{type:"receive",stateMutability:"payable"},{type:"function",name:"ava",inputs:[],outputs:[{name:"",type:"address",internalType:"contract AVA"}],stateMutability:"view"},{type:"function",name:"buyIn",inputs:[{name:"hashedPrompt",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"payable"},{type:"function",name:"setFees",inputs:[{name:"poolFeePerc_",type:"uint256",internalType:"uint256"},{name:"teamFeePerc_",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"BuyIn",inputs:[{name:"user",type:"address",indexed:!0,internalType:"address"},{name:"hashedPrompt",type:"bytes32",indexed:!1,internalType:"bytes32"},{name:"amount",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1}],X="0x608060405234801561001057600080fd5b5060405161094e38038061094e83398101604081905261002f916100c4565b600080546001600160a01b039687166001600160a01b03199182161790915560058054821673cf77a3ba9a5ca399b7c97c74d54e5b1beb874e431790556001805495871695821695909517909455600380549290951691841691909117909355600255600491909155600680549091163317905561011e565b80516001600160a01b03811681146100bf57600080fd5b919050565b600080600080600060a086880312156100dc57600080fd5b6100e5866100a8565b94506100f3602087016100a8565b60408701519094509250610109606087016100a8565b60809690960151949793965091949392915050565b6108218061012d6000396000f3fe6080604052600436106100385760003560e01c80630b78f9c0146100d25780636b6bce99146100f4578063c3107764146101075761008a565b3661008a5760405162461bcd60e51b815260206004820152601e60248201527f526563656976652066756e6374696f6e206e6f7420737570706f72746564000060448201526064015b60405180910390fd5b60405162461bcd60e51b815260206004820152601f60248201527f46616c6c6261636b2066756e6374696f6e206e6f7420737570706f72746564006044820152606401610081565b3480156100de57600080fd5b506100f26100ed366004610642565b610143565b005b6100f2610102366004610664565b610258565b34801561011357600080fd5b50600054610127906001600160a01b031681565b6040516001600160a01b03909116815260200160405180910390f35b6006546001600160a01b0316331461019d5760405162461bcd60e51b815260206004820152601a60248201527f4f6e6c79206f70657261746f722063616e2073657420666565730000000000006044820152606401610081565b60646101a98284610693565b11156101f75760405162461bcd60e51b815260206004820152601c60248201527f546f74616c206665652063616e6e6f74206578636565642031303025000000006044820152606401610081565b601e82111580156102095750601e8111155b61024d5760405162461bcd60e51b81526020600482015260156024820152744665652063616e6e6f74206578636565642033302560581b6044820152606401610081565b600291909155600455565b34600061026482610492565b6040805160018082528183019092529192509060009082816020015b6040805160808101825260008082526020808301829052928201819052606082015282526000199092019101816102805750506040805160808101808352600554633fc8cef360e01b90915291519293509182916001600160a01b031690633fc8cef3906084808501916020918187030181865afa158015610306573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061032a91906106c4565b6001600160a01b039081168252600080548216602080850191909152604080850192909252600554825163d4b6846d60e01b8152925160609095019493169263d4b6846d9260048082019392918290030181865afa158015610390573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906103b491906106c4565b6001600160a01b0316815250816000815181106103d3576103d36106e8565b60209081029190910101526005546001600160a01b0316633da5acba848484336103fe426078610693565b6040518663ffffffff1660e01b815260040161041d94939291906106fe565b6000604051808303818588803b15801561043657600080fd5b505af115801561044a573d6000803e3d6000fd5b505060408051898152602081018990523394507fc088815eec48f34ddcb20951bbbed11b1be026b623572b113f3b4cf4966320e8935001905060405180910390a25050505050565b6000806064600254846104a5919061079f565b6104af91906107b6565b905060006064600454856104c3919061079f565b6104cd91906107b6565b9050811561057a576001546040516000916001600160a01b03169084908381818185875af1925050503d8060008114610522576040519150601f19603f3d011682016040523d82523d6000602084013e610527565b606091505b50509050806105785760405162461bcd60e51b815260206004820152601860248201527f506f6f6c20666565207472616e73666572206661696c656400000000000000006044820152606401610081565b505b8015610625576003546040516000916001600160a01b03169083908381818185875af1925050503d80600081146105cd576040519150601f19603f3d011682016040523d82523d6000602084013e6105d2565b606091505b50509050806106235760405162461bcd60e51b815260206004820152601860248201527f5465616d20666565207472616e73666572206661696c656400000000000000006044820152606401610081565b505b8061063083866107d8565b61063a91906107d8565b949350505050565b6000806040838503121561065557600080fd5b50508035926020909101359150565b60006020828403121561067657600080fd5b5035919050565b634e487b7160e01b600052601160045260246000fd5b808201808211156106a6576106a661067d565b92915050565b6001600160a01b03811681146106c157600080fd5b50565b6000602082840312156106d657600080fd5b81516106e1816106ac565b9392505050565b634e487b7160e01b600052603260045260246000fd5b6000608082018683526080602084015280865180835260a08501915060208801925060005b8181101561077657835180516001600160a01b0390811685526020808301518216818701526040808401511515908701526060928301519091169185019190915290930192608090920191600101610723565b50506001600160a01b038616604085015291506107909050565b82606083015295945050505050565b80820281158282048414176106a6576106a661067d565b6000826107d357634e487b7160e01b600052601260045260246000fd5b500490565b818103818111156106a6576106a661067d56fea264697066735822122002b0b394f7d4338ec94c84a83bdbc5095638411cc648eeec11309bcd9108d3c264736f6c634300081c0033",K=e=>e.length>1;class V extends L.P{getDeployTransaction(e,t,a,s,n,l){return super.getDeployTransaction(e,t,a,s,n,l||{})}deploy(e,t,a,s,n,l){return super.deploy(e,t,a,s,n,l||{})}connect(e){return super.connect(e)}static createInterface(){return new H.KA(q)}static connect(e,t){return new $.NZ(e,q,t)}constructor(...e){K(e)?super(...e):super(q,X,e[0])}}V.bytecode=X,V.abi=q;var Y=a(16085);let J=async e=>({price:"1000000000000000",sessionId:"example-session-id"}),Q=a(2818).env.NEXT_PUBLIC_ETHEREUM_CONTRACT_ADDRESS,Z=e=>{let{messages:t,queryNewMessages:a,showOnlyUserMessages:n,setShowOnlyUserMessages:l,isGameEnded:i}=e,[c,d]=(0,r.useState)(null),[o,x]=(0,r.useState)("idle"),[u,m]=(0,r.useState)(""),[f,h]=(0,r.useState)(!1),{address:p,isConnected:y}=(0,T.F)(),g=(0,r.useRef)(null),v=(0,r.useRef)(null),j=(0,r.useRef)(null),[w,N]=(0,r.useState)(null),k=(0,r.useRef)(null),M=(0,r.useRef)([]),A={address:Q,abi:V.abi},W=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:!0});k.current=new MediaRecorder(e),M.current=[],k.current.ondataavailable=e=>{M.current.push(e.data)},k.current.onstop=async()=>{let e=new Blob(M.current,{type:"audio/wav"});d(e),U(e)},k.current.start(),h(!0)}catch(e){console.error("Error accessing microphone:",e),m("Error accessing microphone. Please check permissions.")}},D=()=>{k.current&&"recording"===k.current.state&&(k.current.stop(),k.current.stream.getTracks().forEach(e=>e.stop()),h(!1))},U=async e=>{try{if(!y){m("Please connect your wallet first");return}if(!p){m("No wallet address found");return}x("pending"),m("");let{price:s,sessionId:n}=await J(p),l=await e.arrayBuffer(),r=await crypto.subtle.digest("SHA-256",l),i=Array.from(new Uint8Array(r)),c="0x"+i.map(e=>e.toString(16).padStart(2,"0")).join(""),o=await (0,P.E)(_.$W,{...A,functionName:"buyIn",args:[c],value:BigInt(s)}),u=new FormData;u.append("audio",e),u.append("sessionId",n),u.append("hash",o),u.append("address",p),await C(n,o.toString(),p,c),await (0,I.n)(_.$W,{hash:o});let f=await E(o);if(f.success)await a(),x("idle"),d(null);else{var t;m(null!==(t=f.error)&&void 0!==t?t:"Something went wrong")}}catch(e){console.error("Error in handleSend:",e),x("error"),m(e instanceof Error?e.message:"Something went wrong")}},z=()=>{g.current&&(g.current.scrollIntoView({behavior:"auto",block:"end"}),setTimeout(()=>{var e;null===(e=g.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"end"})},100))};return(0,r.useEffect)(()=>{z(),t.length>0&&(j.current=t[t.length-1].content)},[]),(0,r.useEffect)(()=>{if(t.length>0){let e=t[t.length-1];e.content!==j.current&&(z(),v.current=e.id),j.current=e.content}},[t]),(0,r.useEffect)(()=>{a()},[n,a]),(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)("div",{className:"flex items-center justify-end",children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("span",{className:"text-xs font-normal text-gray-700",children:"Show My Messages Only"}),(0,s.jsx)(Y.dO,{checked:n,onChange:e=>{l(e)},className:"relative inline-flex h-5 w-9 items-center rounded-full transition-colors duration-200 ease-in-out ".concat(n?"bg-blue-600":"bg-gray-200"),children:(0,s.jsx)("span",{className:"".concat(n?"translate-x-[18px] bg-white":"translate-x-[2px] bg-white"," inline-block h-4 w-4 transform rounded-full shadow-sm transition-transform duration-200 ease-in-out")})})]})})}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto scroll-smooth",children:(0,s.jsxs)("div",{className:"p-4 space-y-6",children:[t.map(e=>{let a="".concat(e.id,"-").concat(e.content);return e===t[t.length-1]?(0,s.jsx)(b,{children:(0,s.jsx)(O,{message:e,onSelect:e=>{N(e.txHash)}})},"anim-".concat(a)):(0,s.jsx)(O,{message:e,onSelect:e=>{N(e.txHash)}},a)}),(0,s.jsx)("div",{ref:g,className:"h-1"})]})}),!i&&(0,s.jsx)("div",{className:"p-4",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto relative",children:[u&&(0,s.jsx)("div",{className:"w-full mb-2 px-4 py-2 bg-red-100 text-red-600 rounded-lg text-sm",children:u}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("button",{onMouseDown:W,onMouseUp:D,onMouseLeave:D,disabled:"pending"===o,className:"\n                  relative\n                  overflow-hidden\n                  bg-stone-800\n                  text-white\n                  text-sm\n                  transition-all\n                  duration-500\n                  ease-in-out\n                  transform\n                  hover:bg-stone-900\n                  focus:outline-none\n                  focus:ring-2\n                  focus:ring-stone-600\n                  focus:ring-offset-2\n                  disabled:opacity-70\n                  h-14\n                  w-14\n                  rounded-full\n                  flex\n                  items-center\n                  justify-center\n                  ".concat(f?"bg-red-500 hover:bg-red-600":"","\n                "),children:"pending"===o?(0,s.jsx)(S.A,{className:"w-6 h-6 animate-spin"}):(0,s.jsx)(F.A,{className:"w-6 h-6 ".concat(f?"animate-pulse":"")})})})]})}),w?(0,R.createPortal)((0,s.jsx)(G,{txHash:w,onClose:()=>N(null)}),document.body):null]})},ee=async()=>({uniqueWallets:0,messagesCount:0,isGameEnded:!1}),et=async()=>0,ea=e=>{let[t,a]=(0,r.useState)(),[i,c]=(0,r.useState)(e.messages),[d,o]=(0,r.useState)(e.gameState),[x,u]=(0,r.useState)(null),[b,p]=(0,r.useState)(!1),{address:y,isConnected:g}=(0,T.F)(),v=(0,r.useCallback)(async()=>{c(await h(b&&g?y:void 0)),o(await ee())},[b,y,g]);return(0,r.useEffect)(()=>{let e=setInterval(v,5e3);return()=>clearInterval(e)},[v]),(0,r.useEffect)(()=>{x&&(console.log("Selected Message State:",x),console.log("Has fullConversation:","fullConversation"in x))},[x]),(0,r.useEffect)(()=>{(async()=>{a(await et())})()},[]),(0,s.jsxs)("div",{className:"h-screen flex flex-col overflow-hidden",children:[(0,s.jsx)(k,{gameState:d,prizeFund:null!=t?t:0}),(0,s.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,s.jsxs)(n.P.div,{className:"hidden lg:block w-1/4 min-w-[300px] max-w-[400px] overflow-y-auto",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.8,delay:3.5,ease:[.23,1,.32,1]},children:[(0,s.jsx)(w.W,{}),(0,s.jsx)(j.U,{totalParticipants:d.uniqueWallets,totalMessages:d.messagesCount,prizeFund:null!=t?t:0,endgameTime:d.endgameTime,className:"mt-8",isGameEnded:d.isGameEnded})]}),(0,s.jsxs)("div",{className:"flex-1 flex flex-col overflow-hidden px-4 lg:px-8",children:[(0,s.jsxs)(n.P.div,{className:"flex-shrink-0 text-center pb-4 lg:pb-8 max-w-3xl mx-auto w-full",initial:{y:"50vh",translateY:"-50%"},animate:{y:0,translateY:0},transition:{duration:.5,delay:2.5,ease:[.23,1,.32,1]},children:[(0,s.jsx)(f,{className:"mb-4 lg:mb-8 text-2xl lg:text-3xl",prizeFund:t}),(0,s.jsxs)("div",{className:"relative inline-flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-white flex items-center justify-center flex-shrink-0 shadow-[0_2px_10px_rgba(0,0,0,0.06)]",children:(0,s.jsx)(U.default,{src:"/freysa.png",alt:"Freysa",height:48,width:48,className:"rounded-full"})}),(0,s.jsx)("div",{className:"relative inline-block",children:(0,s.jsxs)("div",{className:"bg-white rounded-[2rem] px-8 flex items-center h-[4.5rem] py-10 shadow-[0_2px_10px_rgba(0,0,0,0.06)]",children:[(0,s.jsx)(m,{}),(0,s.jsx)("div",{className:"absolute left-[-12px] top-1/2 -translate-y-1/2",style:{width:"20px",height:"20px",background:"white",clipPath:"polygon(100% 0, 0 50%, 100% 100%, 100% 55%, 100% 45%)"},children:(0,s.jsx)("div",{className:"w-full h-full bg-white"})})]})})]})]}),(0,s.jsx)("div",{className:"flex-1 pb-8 min-h-0 flex justify-center",children:(0,s.jsx)(n.P.div,{className:"h-full rounded-3xl overflow-hidden max-w-3xl w-full",initial:{opacity:0,scale:1.02},animate:{opacity:1,scale:1},transition:{duration:1,delay:3,ease:[.23,1,.32,1]},children:(0,s.jsx)(Z,{messages:i,queryNewMessages:v,showOnlyUserMessages:b,setShowOnlyUserMessages:p,isGameEnded:d.isGameEnded})})})]}),(0,s.jsx)("div",{className:"hidden lg:block w-1/4 min-w-[300px] max-w-[400px] overflow-y-auto"})]}),(0,s.jsx)(l.N,{children:x&&(0,s.jsx)(G,{txHash:x.txHash,onClose:()=>u(null)})})]})}},62044:(e,t,a)=>{"use strict";a.d(t,{$W:()=>l});var s=a(64276),n=a(95622);let l=(0,s.Y8)({appName:"Freysa",projectId:"e7df0e7277ec915bd5625c2cce004386",chains:[n.E],ssr:!0})},29602:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var s=a(43463),n=a(69795);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[8451,6491,5820,2686,8441,1517,7358],()=>t(66982)),_N_E=e.O()}]);